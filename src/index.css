@import "tailwindcss";

@theme {
  --color-gold: #ffd700;
  --color-danger: #dc2626;
  --color-cash: #4ade80;
  --color-fixed: #60a5fa;
  --color-goodwill: #c084fc;
  --color-liability: #f87171;
  --color-equity: #facc15;
  --color-equity-negative: #ef4444;
  --color-dark-bg: #0f172a;
  --color-dark-surface: #1e293b;
  --color-dark-border: #334155;
}

body {
  margin: 0;
  background: var(--color-dark-bg);
  color: #e2e8f0;
  font-family: 'Segoe UI', 'Hiragino Sans', 'Noto Sans JP', sans-serif;
  overflow-x: hidden;
}

* {
  box-sizing: border-box;
}

/* TV noise overlay */
.noise-overlay {
  position: absolute; inset: 0; z-index: 60;
  pointer-events: none; opacity: 0;
  mix-blend-mode: overlay;
  background: repeating-conic-gradient(rgba(255,255,255,0.03) 0%, rgba(0,0,0,0.06) 1%, transparent 2%);
  background-size: 3px 3px;
  animation: noise-flicker 0.15s steps(3) infinite;
}
.noise-overlay.active { opacity: 1; }
@keyframes noise-flicker { 0%{background-position:0 0} 33%{background-position:-5px 5px} 66%{background-position:3px -3px} 100%{background-position:-3px 0} }

/* Crack overlay */
.crack-overlay { position: absolute; inset: 0; pointer-events: none; z-index: 5; }
.crack-overlay svg { width: 100%; height: 100%; animation: crack-appear 0.6s ease-out forwards; }
@keyframes crack-appear { 0%{clip-path:inset(0 100% 0 0);opacity:0} 30%{opacity:1} 100%{clip-path:inset(0 0 0 0);opacity:1} }

/* CAUTION tape (GC warning) */
.caution-tape {
  position: absolute; inset: -6px; z-index: 40;
  pointer-events: none; border-radius: inherit;
  border: 4px solid transparent;
  background: repeating-linear-gradient(
    -45deg, #000 0px, #000 10px, #eab308 10px, #eab308 20px
  ) border-box;
  -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
  mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: caution-scroll 0.8s linear infinite;
}
@keyframes caution-scroll { to { background-position: 28px 0; } }

/* Cash smoke evaporation effect */
.smoke-particle {
  position: absolute; top: 0; left: 50%;
  width: 6px; height: 6px; border-radius: 50%;
  background: rgba(255,255,255,0.3);
  pointer-events: none;
  animation: smoke-rise 1.5s ease-out infinite;
}
.smoke-particle:nth-child(2) { left: 30%; animation-delay: 0.4s; width: 4px; height: 4px; }
.smoke-particle:nth-child(3) { left: 70%; animation-delay: 0.8s; width: 5px; height: 5px; }
@keyframes smoke-rise {
  0%   { transform: translateY(0) scale(1); opacity: 0.4; }
  100% { transform: translateY(-20px) scale(2); opacity: 0; }
}

/* Vital pulse (heartbeat red glow) — z-index:35 */
.vital-pulse-overlay {
  position: absolute; inset: -8px; z-index: 35;
  pointer-events: none; border-radius: inherit;
  background: radial-gradient(ellipse at center,
    rgba(220,38,38,0.35) 0%, rgba(220,38,38,0.1) 50%, transparent 80%);
  opacity: 0;
  animation: vital-pulse 0.85s ease-in-out infinite;
}
@keyframes vital-pulse {
  0%   { opacity: 0; transform: scale(1); }
  15%  { opacity: 0.8; transform: scale(1.02); }
  30%  { opacity: 0.2; transform: scale(1); }
  45%  { opacity: 0.6; transform: scale(1.01); }
  60%  { opacity: 0.1; transform: scale(1); }
  100% { opacity: 0; transform: scale(1); }
}

/* Shatter particles (impairment) — z-index:30 */
.shatter-particle {
  position: absolute; width: 6px; height: 6px;
  border-radius: 1px; pointer-events: none; z-index: 30;
  animation: shatter-fly var(--duration, 1s) ease-out forwards;
}
@keyframes shatter-fly {
  0%   { transform: translate(0,0) rotate(0deg) scale(1); opacity: 0.9; }
  100% { transform: translate(var(--tx,30px), var(--ty,-40px)) rotate(var(--rot,180deg)) scale(0.2); opacity: 0; }
}

/* Glow particles (equity surge) — z-index:30 */
.glow-particle {
  position: absolute; width: 4px; height: 4px;
  border-radius: 50%; pointer-events: none; z-index: 30;
  background: radial-gradient(circle, #ffd700 0%, rgba(255,215,0,0.4) 60%, transparent 100%);
  box-shadow: 0 0 6px 2px rgba(255,215,0,0.5);
  animation: glow-rise var(--duration, 1.2s) ease-out forwards;
}
@keyframes glow-rise {
  0%   { transform: translateY(0) scale(1); opacity: 0.9; }
  50%  { transform: translateY(var(--ty, -30px)) scale(1.3); opacity: 0.7; }
  100% { transform: translateY(var(--ty2, -60px)) scale(0.5); opacity: 0; }
}

/* Stakeholder voice bubble — z-index:45 */
.voice-bubble {
  position: absolute; z-index: 45; pointer-events: none;
  max-width: 160px; padding: 4px 10px; border-radius: 8px;
  font-size: 11px; font-weight: 600; white-space: nowrap;
  backdrop-filter: blur(4px);
}
.voice-bubble--negative {
  background: rgba(220,38,38,0.25); color: #fca5a5;
  border: 1px solid rgba(248,113,113,0.3);
  text-shadow: 0 0 8px rgba(220,38,38,0.4);
}
.voice-bubble--positive {
  background: rgba(34,197,94,0.2); color: #86efac;
  border: 1px solid rgba(74,222,128,0.3);
  text-shadow: 0 0 8px rgba(34,197,94,0.3);
}

/* B/S prediction range sliders */
.bs-range {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 8px;
  border-radius: 4px;
  background: rgba(100, 116, 139, 0.3);
  outline: none;
}
.bs-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--thumb-color, #facc15);
  cursor: pointer;
  border: 2px solid rgba(255, 255, 255, 0.4);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
}
.bs-range::-moz-range-thumb {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--thumb-color, #facc15);
  cursor: pointer;
  border: 2px solid rgba(255, 255, 255, 0.4);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
}
.bs-range::-webkit-slider-runnable-track {
  height: 8px;
  border-radius: 4px;
}
.bs-range::-moz-range-track {
  height: 8px;
  border-radius: 4px;
  background: rgba(100, 116, 139, 0.3);
}
